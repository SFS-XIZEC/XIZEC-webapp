{"version":3,"sources":["turbopack:///[project]/src/lib/api.ts"],"sourcesContent":["import { flattenAttributes } from \"@/lib/utils\";\r\n\r\nexport async function fetchData(url: string, authToken?: string) {\r\n  const headers = {\r\n    method: \"GET\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: `Bearer ${authToken}`,\r\n    },\r\n  };\r\n\r\n  try {\r\n    const response = await fetch(url, authToken ? headers : {});\r\n    const data = await response.json();\r\n    if (!response.ok) throw new Error(\"Failed to fetch data\");\r\n    return flattenAttributes(data);\r\n  } catch (error) {\r\n    console.error(\"Error fetching data:\", error);\r\n    throw error;\r\n  }\r\n}\r\n\r\nexport async function postData<T>(\r\n  url: string,\r\n  body: Record<string, unknown>,\r\n  authToken?: string\r\n): Promise<T> {\r\n  console.log(url,body)\r\n  const options: RequestInit = {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      ...(authToken && { Authorization: `Bearer ${authToken}` }),\r\n    },\r\n    body: JSON.stringify(body),\r\n  };\r\n\r\n  try {\r\n    const response = await fetch(url, options);\r\n    const data = await response.json();\r\n    if (!response.ok)\r\n      throw new Error(data?.error?.message || \"Failed to post data\");\r\n    return flattenAttributes(data);\r\n  } catch (error) {\r\n    console.error(\"Error posting data:\", error);\r\n    throw error;\r\n  }\r\n}\r\n"],"names":[],"mappings":"iFAAA,IAAA,EAAA,EAAA,CAAA,CAAA,OAEO,eAAe,EAAU,CAAW,CAAE,CAAkB,EAC7D,IAAM,EAAU,CACd,OAAQ,MACR,QAAS,CACP,eAAgB,mBAChB,cAAe,CAAC,OAAO,EAAE,EAAA,CAAW,AACtC,CACF,EAEA,GAAI,CACF,IAAM,EAAW,MAAM,MAAM,EAAK,EAAY,EAAU,CAAC,GACnD,EAAO,MAAM,EAAS,IAAI,GAChC,GAAI,CAAC,EAAS,EAAE,CAAE,MAAM,AAAI,MAAM,wBAClC,MAAO,CAAA,EAAA,EAAA,iBAAA,AAAiB,EAAC,EAC3B,CAAE,MAAO,EAAO,CAEd,MADA,QAAQ,KAAK,CAAC,uBAAwB,GAChC,CACR,CACF,CAEO,eAAe,EACpB,CAAW,CACX,CAA6B,CAC7B,CAAkB,EAElB,QAAQ,GAAG,CAAC,EAAI,GAChB,IAAM,EAAuB,CAC3B,OAAQ,OACR,QAAS,CACP,eAAgB,mBAChB,GAAI,GAAa,CAAE,cAAe,CAAC,OAAO,EAAE,EAAA,CAAW,AAAC,CAAC,AAC3D,EACA,KAAM,KAAK,SAAS,CAAC,EACvB,EAEA,GAAI,CACF,IAAM,EAAW,MAAM,MAAM,EAAK,GAC5B,EAAO,MAAM,EAAS,IAAI,GAChC,GAAI,CAAC,EAAS,EAAE,CACd,MAAM,AAAI,MAAM,GAAM,OAAO,SAAW,uBAC1C,MAAO,CAAA,EAAA,EAAA,iBAAA,AAAiB,EAAC,EAC3B,CAAE,MAAO,EAAO,CAEd,MADA,QAAQ,KAAK,CAAC,sBAAuB,GAC/B,CACR,CACF"}